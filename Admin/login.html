<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login / Sign Up</title>
  <link rel="stylesheet" href="../Assets/Admin.css">
</head>
<body class="login-page">

  <div class="login-container" id="authContainer">
    <!-- LOGIN FORM -->
    <div id="loginBox">
      <h2>Welcome ğŸ‘‹</h2>
      <form id="loginForm">
        <input type="text" id="username" placeholder="Username" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
      </form>

      <button id="guestBtn" class="guest-btn">Login as Guest</button>

      <div class="login-footer">
        <p>Donâ€™t have an account? 
          <a href="#" id="showSignup" style="color:#007bff; text-decoration:none; font-weight:500;">Sign up</a>
        </p>
        <p>Â© 2025 Event Portal</p>
      </div>
    </div>

    <!-- SIGNUP FORM -->
    <div id="signupBox" style="display: none;">
      <h2>Create Account ğŸ“</h2>
      <form id="signupForm">
        <input type="text" id="newUsername" placeholder="Choose username" required>
        <input type="password" id="newPassword" placeholder="Choose password" required>
        <input type="email" id="newEmail" placeholder="Your email (optional)">
        <button type="submit">Sign Up</button>
      </form>

      <div class="login-footer">
        <p>Already have an account? 
          <a href="#" id="showLogin" style="color:#007bff; text-decoration:none; font-weight:500;">Login</a>
        </p>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById("loginForm");
    const guestBtn = document.getElementById("guestBtn");
    const signupForm = document.getElementById("signupForm");

    const loginBox = document.getElementById("loginBox");
    const signupBox = document.getElementById("signupBox");
    const showSignup = document.getElementById("showSignup");
    const showLogin = document.getElementById("showLogin");

    // ğŸŒŸ ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† login Ùˆ signup
    showSignup.addEventListener("click", () => {
      loginBox.style.display = "none";
      signupBox.style.display = "block";
    });

    showLogin.addEventListener("click", () => {
      signupBox.style.display = "none";
      loginBox.style.display = "block";
    });

    // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    form.addEventListener("submit", function(e) {
      e.preventDefault();

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();

      if (username === "admin" && password === "1234") {
        localStorage.setItem("role", "admin");
        window.location.href = "admin_layout.html";
      } 
      else if (username === "user" && password === "1234") {
        localStorage.setItem("role", "user");
        window.location.href = "../User/dashboard.html";
      } 
      else {
        alert("âŒ Incorrect username or password!");
      }
    });

    // ğŸ‘¤ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ
    guestBtn.addEventListener("click", () => {
      localStorage.setItem("role", "guest");
      window.location.href = "../Guest/home.html";
    });

    // ğŸ†• ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
    signupForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const newUser = document.getElementById("newUsername").value.trim();
      const newPass = document.getElementById("newPassword").value.trim();
      const newEmail = document.getElementById("newEmail").value.trim();

      if (newUser && newPass) {
        // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø´ÙƒÙ„ Ø¨Ø³ÙŠØ· ÙÙŠ localStorage
        const users = JSON.parse(localStorage.getItem("users")) || [];
        users.push({ username: newUser, password: newPass, email: newEmail });
        localStorage.setItem("users", JSON.stringify(users));

        alert("âœ… Account created successfully! You can now login.");
        signupBox.style.display = "none";
        loginBox.style.display = "block";
      } else {
        alert("âš  Please fill in all required fields.");
      }
    });
  </script>

</body>
</html>